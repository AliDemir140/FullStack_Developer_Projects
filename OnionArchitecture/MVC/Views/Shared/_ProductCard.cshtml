@model Application.DTOs.ProductDTOs.ProductDTO

<div class="card h-100 product-card shadow-sm">
    <div class="card-body">
        <h5 class="card-title">@Model.ProductName</h5>
        <p class="card-text text-muted small">
            @if (!string.IsNullOrEmpty(Model.Description))
            {
                @Model.Description
            }
            else
            {
                <span>Ürün açıklaması bulunmuyor.</span>
            }
        </p>

        <div class="mt-3">
            <div class="d-flex justify-content-between align-items-center mb-2">
                <span class="text-muted small">Fiyat:</span>
                <h5 class="text-primary mb-0">@Model.UnitPrice.ToString("C2")</h5>
            </div>

            <div class="d-flex justify-content-between align-items-center mb-3">
                <span class="text-muted small">Stok:</span>
                <span class="badge @(Model.UnitsInStock > 0 ? "bg-success" : "bg-danger")">
                    @Model.UnitsInStock adet
                </span>
            </div>
        </div>
    </div>

    <div class="card-footer bg-white border-top">
        @if (Model.UnitsInStock > 0)
        {
            <!-- Form ile sepete ekleme -->
            <form asp-controller="Cart" asp-action="AddToCart" method="post" class="add-to-cart-form">
                <input type="hidden" name="productId" value="@Model.Id" />
                <div class="input-group mb-2">
                    <input type="number"
                           name="quantity"
                           value="1"
                           min="1"
                           max="@Model.UnitsInStock"
                           class="form-control"
                           style="max-width: 80px;" />
                    <button type="submit" class="btn btn-primary flex-grow-1">
                        <i class="fas fa-cart-plus"></i> Sepete Ekle
                    </button>
                </div>
            </form>

            <!-- AJAX ile sepete ekleme (alternatif) -->
            <button type="button"
                    class="btn btn-outline-primary btn-sm w-100"
                    onclick="addToCartAjax(@Model.Id)">
                <i class="fas fa-bolt"></i> Hızlı Sepete Ekle
            </button>
        }
        else
        {
            <button class="btn btn-secondary w-100" disabled>
                <i class="fas fa-times-circle"></i> Stokta Yok
            </button>
        }
    </div>
</div>